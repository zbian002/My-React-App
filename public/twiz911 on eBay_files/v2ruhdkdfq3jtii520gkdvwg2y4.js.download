raptor.defineModule("ebayUI.Transitions",function(){var a=(document.body||document.documentElement).style,a=void 0!==a.transition||void 0!==a.WebkitTransition||void 0!==a.MozTransition||void 0!==a.MsTransition||void 0!==a.OTransition,b="TransitionEnd";$.browser.webkit?b="webkitTransitionEnd":$.browser.mozilla?b="transitionend":$.browser.opera?b="oTransitionEnd otransitionend":$.browser.msie&&9<parseInt($.browser.version,10)&&(b="transitionend");return{support:a,end:b}});define("raptor/strings/StringBuilder",function(){var b=function(){this.array=[];this.length=0};b.prototype={append:function(a){"string"!==typeof a&&(a=a.toString());this.array.push(a);this.length+=a.length;return this},toString:function(){return this.array.join("")},clear:function(){this.array=[];this.length=0;return this}};b.prototype.write=b.prototype.append;return b});define("raptor/strings",["raptor"],function(i,h){var c=function(a){return a?a.trim():""},g=h("raptor/strings/StringBuilder"),f=/\$\{([A-Za-z0-9_\.]+)\}/g;return{compare:function(a,b){return a<b?-1:a>b?1:0},isEmpty:function(a){return null==a||0===c(a).length},length:function(a){return null==a?0:a.length},isString:function(a){return"string"===typeof a},equals:function(a,b,d){!1!==d&&(a=c(a),b=c(b));return a==b},notEquals:function(a,b,d){return!1===this.equals(a,b,d)},trim:c,ltrim:function(a){return a?
a.replace(/^\s\s*/,""):""},rtrim:function(a){return a?a.replace(/\s\s*$/,""):""},startsWith:function(a,b){return null==a?!1:a.startsWith(b)},endsWith:function(a,b){return null==a?!1:a.endsWith(b)},unicodeEncode:function(a){return"\\u"+("0000"+(+a.charCodeAt(0)).toString(16)).slice(-4)},merge:function(a,b){var d,e,c=[];e=0;for(f.lastIndex=0;d=f.exec(a);)c.push(a.substring(e,d.index)),e=b[d[1]],c.push(void 0!==e?e:d[0]),e=f.lastIndex;c.push(a.substring(e));return c.join("")},StringBuilder:g,createStringBuilder:function(){return new g}}});define("raptor/xml/utils",function(){var c=/[&<]/,d=/[&<]/g,e=/[&<>\"\'\n]/,f=/[&<>\"\'\n]/g,b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;","\n":"&#10;"};return{escapeXml:function(a){return"string"===typeof a&&c.test(a)?a.replace(d,function(a){return b[a]}):a},escapeXmlAttr:function(a){return"string"===typeof a&&e.test(a)?a.replace(f,function(a){return b[a]}):a}}});define.Class("raptor/render-context/Context",["raptor"],function(f,e){var i=f.forEachEntry,j=e("raptor/xml/utils").escapeXmlAttr,k=e("raptor/strings/StringBuilder"),l=f.createError,m=0,h=function(a,b){var c=e(a),c=c[b]||c.prototype&&c.prototype[b];if(!c)throw l(Error('Helper function not found with name "'+b+'" in class "'+a+'"'));return c},g=function(a){this.writer=a;this.w=this.write;this.listeners={}};g.classFunc=h;var d={getAttributes:function(){return this.attributes||(this.attributes={})},uniqueId:function(){return"c"+
m++},write:function(a){null!==a&&void 0!==a&&("string"!==typeof a&&(a=a.toString()),this.writer.write(a));return this},getOutput:function(){return this.writer.toString()},captureString:function(a,b){var c=new k;this.swapWriter(c,a,b);return c.toString()},swapWriter:function(a,b,c){var d=this.writer;try{this.writer=a,b.call(c)}finally{this.writer=d}},createNestedContext:function(a){a=e("raptor/render-context").createContext(a);a.attributes=this.getAttributes();return a},invokeHandler:function(a,b){"string"===
typeof a&&(a=e(a));(a.process||a.render).call(a,b,this)},getFunction:function(a,b){this._helpers||(this._helpers={});var c=a+":"+b,d=this._helpers[c];d||(d=this._helpers[c]=h(a,b).bind(this));return d},getHelperObject:function(a){this._helpers||(this._helpers={});return new (this._helpers[a]||(this._helpers[a]=e(a)))(this)},isTagInput:function(a){return a&&a.hasOwnProperty("_tag")},renderTemplate:function(a,b){e("raptor/templating").render(a,b,this);return this},attr:function(a,b,c){if(null===b||
!0===b)b="";else{if(void 0===b||!1===b||"string"===typeof b&&""===b.trim())return this;b='="'+(!1===c?b:j(b))+'"'}this.write(" "+a+b);return this},attrs:function(a){1!==arguments.length?this.attr.apply(this,arguments):a&&i(a,this.attr,this);return this},t:function(a,b,c,d,e){b||(b={});b._tag=!0;c&&(b.invokeBody=c);d&&(b.dynamicAttributes=d);e&&f.extend(b,e);this.invokeHandler(a,b);return this},c:function(a){var b=this.captureString(a);return{toString:function(){return b}}}};d.a=d.attrs;d.f=d.getFunction;
d.o=d.getHelperObject;d.i=d.renderTemplate;g.prototype=d;return g});define("raptor/render-context",function(a){var c=a("raptor/strings/StringBuilder"),b=a("raptor/render-context/Context");return{createContext:function(a){return new b(a||new c)},Context:b}});define("raptor/templating",["raptor"],function(i,f){var g={},p=Array.isArray,h=i.createError,q=f("raptor/strings/StringBuilder"),r=f("raptor/xml/utils").escapeXml,s=f("raptor/xml/utils").escapeXmlAttr,j=f("raptor/render-context"),k=j.Context,l=k.classFunc,m=function(a){var a=f(a),b;if(a.process||a.render)b=a;else if(!(b=a.instance))b=a.instance=new a;return b},n=function(a){return!0===Array.isArray(a)?0!==a.length:a},o={h:l,t:m,fv:function(a,b){if(a){a.forEach||(a=[a]);for(var c=0,d=a.length,e={getLength:function(){return d},
isLast:function(){return c===d-1},isFirst:function(){return 0===c},getIndex:function(){return c}};c<d;c++)b(a[c]||"",e)}},f:i.forEach,fl:function(a,b){null!=a&&(p(a)||(a=[a]),b(a,0,a.length))},fp:function(a,b){if(a)for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])},e:function(a){return!n(a)},ne:n,x:r,xa:s,nx:function(a){return{toString:function(){return a}}}};return{templateFunc:function(a){var b=g[a];if(!b){b=$rget("rhtml",a);!b&&this.findTemplate&&(this.findTemplate(a),b=$rget("rhtml",a));b&&(b=b(o));
if(!b)throw h(Error('Template not found with name "'+a+'"'));g[a]=b}return b},render:function(a,b,c){if(!c)throw h(Error("Context is required"));var d=this.templateFunc(a);try{d(b||{},c)}catch(e){throw h(Error('Unable to render template with name "'+a+'". Exception: '+e),e);}},renderToString:function(a,b,c){var d=new q;if(void 0===c)this.render(a,b,new k(d));else{var e=this;c.swapWriter(d,function(){e.render(a,b,c)})}return d.toString()},unload:function(a){delete g[a];$rset("rhtml",a,void 0)},getFunction:l,
createContext:j.createContext,getHandler:m,helpers:o}});$rset("rhtml","ebayUI.button",function(a){var d=a.xa;return function(b,a){var e=b.id,c=b.value,f=b.cls;a.w("<input").a("id",e).w(' class="btn ').w(d(f)).w('" type="button"').a("title",c).a("value",c).w(">")}});define.Class("ebayUI.Button",function(){var c=require("raptor/templating"),d=require("raptor/listeners"),b=function(a){$.extend(this.options,a||{});d.makeObservable(this);var b=this.getHtml(),a=this.options;return a.target?$(b).appendTo($(a.target)):b};b.prototype={options:{type:"prim",size:"large"},getHtml:function(){var a=this.options,a={id:a.id,value:a.value,cls:this.sizeCss()+" "+this.typeCss()+(a.disabled?" btn-d":""),disabled:a.disabled||!1};return c.renderToString("ebayUI.button",a)},sizeCss:function(){var a=
"";switch(this.options.size){case "large":case "default":a="";break;case "medium":a="btn-m";break;case "small":a="btn-s"}return a},typeCss:function(){var a="";switch(this.options.type){case "prim":case "default":a="btn-prim";break;case "sec":a="btn-scnd";break;case "ter":a="btn-ter";break;case "green":a="btn-g"}return a}};return b});define.Class("ebayUI.Dragger",function(){var b=function(a){a=a||{};this.dragger=a.dragger;this.target=a.target;this.doc=$(document);this.body=$(document.body);this.dragger.on("mousedown",$.proxy(this.onDragStart,this)).addClass("drag")};b.prototype={onDragStart:function(a){var b=this.target.offset(),c=this.doc;this.clientTop=a.clientY-b.top;this.clientLeft=a.clientX-b.left;c.on("mouseup",$.proxy(this.onDragStop,this));c.on("mousemove",$.proxy(this.onDragMove,this));this.disableSelect()},onDragMove:function(a){this.target.offset({top:a.clientY-
this.clientTop,left:a.clientX-this.clientLeft});this.target.css("opacity",0.7);return!1},onDragStop:function(){var a=this.doc;a.off("mouseup",this.onDragStop);a.off("mousemove",this.onDragMove);this.target.css("opacity",1);this.enableSelect()},disableSelect:function(){var a=this.body;a.on("dragstart, selectstart",this.cancelSelect);a.css("-moz-user-select","none")},enableSelect:function(){var a=this.body;a.off("dragstart, selectstart",this.cancelSelect);a.css("-moz-user-select","")},cancelSelect:function(){return!1}};
return b});"undefined"===typeof ebayContent&&(ebayContent={});
define("ebay/content",["raptor"],function(k,l){var e=/\$\{([A-Za-z0-9_\.]+)\}/g,m=l("ebay/content/ResolvedContent"),j={};return{get:function(d){return ebayContent[d]},merge:function(d,a){var b,c=[],g=0;for(e.lastIndex=0;b=e.exec(d);)c.push(d.substring(g,b.index)),b=a[b[1]],c.push(void 0!==b?b:""),g=e.lastIndex;c.push(d.substring(g));return c.join("")},resolve:function(d){var a=j[d];if(void 0===a){a=d;a.startsWith("/")&&(a=a.substring(1));var a=a.replace(/\./g,"/"),b=a.indexOf("/");if(-1===b)throw k.createError(Error("Invalid content path: "+
d));b=a.indexOf("/",b+1);-1===b&&(b=a.length);for(var c=a.substring(0,b),a=a.substring(b+1).split("/"),c=this.get(c),b=0,g=a.length;b<g&&c;b++){var f=a[b];if(""===f)break;var e=-1,h=f.lastIndexOf("["),i;-1!=h&&(i=f.lastIndexOf("]"),-1!=i&&(e=parseInt(f.substring(h+1,i),10),f=f.substring(0,h)));c=c[f];0<=e&&c&&(c=c[e])}a=c?new m(c,d):null;j[d]=a}return a}}});define.Class("ebay/content/ResolvedContent",["raptor"],function(d,e){var f=d.createError,c=function(b,a){this.value=b;this.path=a};c.prototype={getText:function(b){var a=this.value;if("string"!==typeof a)throw f(Error("String content expected at path "+this.path+". Actual: "+a));return b?e("ebay/content").merge(a,b):a},toString:function(){return this.getText()}};return c});ebayContent["RaptorWidgets/GeneralText"]={close:"close"};define.Class("ebayUI.Overlay",function(){var j=raptor.require("ebayUI.Dragger"),k=raptor.require("ebayUI.Button"),g=raptor.require("ebayUI.Transitions"),h=g.support,i=g.end,l=require("raptor/listeners"),m=1,n='<div class="oly-h"></div><a href="javascript:;" role="button" class="oly-c" data-dismiss="olay" title="'+require("ebay/content").resolve("/RaptorWidgets/GeneralText/close")+'">Close</a><div class="oly-b"></div><div class="oly-f"></div>',o={fixed:!0,draggable:!1,mask:!0,autoClose:!1,escape:!0,
buttons:[],offset:null,closeIcon:!0,width:500,ariaDesc:"This is overlay dialog"},g=function(a){var c="oly_"+m++;this.options=$.extend({},o,a||{});this.fixed="absolute"===this.options.position?!1:!0;l.makeObservable(this);a="alertdialog";!1==this.options.closeIcon&&(a="alert");this.elem=$('<div id="'+c+'" class="oly" tabindex="-1" role="'+a+'">'+n+"</div>").appendTo(document.body);this.elem.prepend('<div id="'+c+'-ariadesc" class="offscreen" />');this.elem.hide();this.overlayId=c;this.title=$(".oly-h",
this.elem);this.body=$(".oly-b",this.elem);this.footer=$(".oly-f",this.elem);this.ariaDesc=$("#"+c+"-ariadesc");this.elem.attr({"aria-describedby":c+"-ariadesc"});this.options.draggable&&new j({dragger:$(".oly-h",this.elem),target:this.elem});this.delegate()};g.prototype={getOffset:function(){var a=this.elem,c=a.outerWidth(),b=a.outerHeight(),d=$(window),a=d.width(),e=d.height(),d=this.fixed?{top:0,left:0}:{top:d.scrollTop(),left:d.scrollLeft()},b=this.offsetTop||Math.round(d.top+(e-b)/2),c=this.offsetLeft||
Math.round(d.left+(a-c)/2);return{top:Math.max(b,10),left:Math.max(c,10)}},setOptions:function(a){$.extend(this.options,a)},show:function(a,c){var b=this,a=a||{},d=b.options,e=b.elem,f=e.attr("id")+"-title";b.isShown?b.focusTabbable():(b.publish("beforeshow",{cmp:b}),"undefined"!==typeof c&&b.setOptions(c),b.triggerId=a.triggerId,b.isShown=!0,a.title?b.title.html('<h3 id="'+f+'">'+a.title+"</h3>"):"",a.content?b.body.html(a.content):"",b.content=a.content,e.width(d.width),b.ariaDesc.html(d.ariaDesc),
b.setHeader(a.title,f),b.mask(function(){e.show();b.setFooter(a);b.setPosition();b.elem.focus();b.focusTabbable();b.publish("onshow",{cmp:b});$(document).not(b.elem).on("click",b.onDocClick.bind(b))}),$(window).on("resize",b.setPosition.bind(b)))},setPosition:function(){var a=this.options.offset||this.getOffset();this.elem.css({top:a.top,left:a.left,position:"absolute"===this.options.position?"absolute":"fixed"})},setHeader:function(a,c){var b=this.elem;this.options.closeIcon||$(".oly-c",b).hide();
a&&0<a.length?b.attr({"aria-labelledby":c}):this.title.hide()},setFooter:function(a){var c=a.buttons,b=this.footer;if(a.footer)b.html(a.footer);else if(c&&0<c.length)$.each(c,function(a,c){var f=new k({type:c.type,size:c.size,id:c.id,value:c.value,disabled:c.disabled||!1,target:b});if(c.handler)f.on("click",function(a){c.handler(a)})});else if(a.closeText)$('<a href="javascript:;" class="closeLink">'+a.closeText+"</a>").appendTo(b).on("click",this.hide.bind(this));else b.hide()},hide:function(){this.isShown&&
(this.isShown=!1,this.publish("beforehide",{cmp:this}),$("#hid_"+this.overlayId+"_Cnt").length||$('<div id="hid_'+this.overlayId+'_Cnt" style="display:none"></div>').appendTo($("body")),$("#hid_"+this.overlayId+"_Cnt").empty().append(this.body.children()),h?(this.hideOlay(),this.elem.removeClass("in")):this.hideOlay(),this.anchor?this.anchor.focus():$("#"+this.triggerId).focus(),$(document).off("click",this.onDocClick))},hideOlay:function(){this.footer.html("");this.elem.hide();this.mask();this.publish("onhide",
{cmp:this})},removeMask:function(){this.maskLayer&&(this.maskLayer.remove(),this.maskLayer=null)},mask:function(a){var c=this.options;if(this.isShown&&c.mask){c=this.maskLayer=$('<div class="oly-m fade" />').appendTo(document.body);if(h){var b=c[0].offsetWidth;window.console&&console.log(b)}c.addClass("in");h?c.one(i,a):a()}else!this.isShown&&this.maskLayer?(this.maskLayer.removeClass("in"),h?this.maskLayer.one(i,this.removeMask.bind(this)):this.removeMask()):a&&a()},onKeyDown:function(a){var c=this.elem;
if(this.options.escape&&!a.isDefaultPrevented()&&a.keyCode&&27===a.which)a.preventDefault(),this.hide();else if(9===a.which){var b=$('[tabindex="0"],a,input,select,button',c).filter(":visible");if(!(0>=b.length)){var d=b.filter(":first"),b=b.filter(":last"),e=a.shiftKey,f=a.target;if((f===b[0]||f===c[0])&&!e)d.focus(),a.preventDefault();else if((f===d[0]||f===c[0])&&e)b.focus(1),a.preventDefault()}}},onDocClick:function(a){var c=$(a.target),b,d,e;0<c.closest("div.oly").length?(b=c.closest("div.oly"),
d=b[0].id):(b=this,d=b.elem.attr("id"),e=b.options);var f=b.triggerId?b.triggerId:b.anchor?b.anchor.attr("id"):null;if(b.isShown&&!(c.attr("id")===f||c.attr("id")===d||0<c.parents("#"+d).length))e.autoClose?b.hide():e.mask&&(b.focusTabbable(),a.preventDefault())},delegate:function(){var a=this.elem;a.on("click",'[data-dismiss="olay"]',this.hide.bind(this));a.on("keydown",this.onKeyDown.bind(this))},focusTabbable:function(){var a=this.elem,c=a.find("[autofocus]");c.length||(c=$('[tabindex="0"],a,input,select,button',
a).filter(":visible"));c.length||(c=a);c[0].focus()}};return g});define.Class("ebayUI.Bubble",{superclass:"ebayUI.Overlay"},function(){var h={draggable:!1,position:"absolute",mask:!1,width:null,ariaDesc:"This is bubble help"},f=18,g=18,d=function(b){var a=$.browser;this.isIE78=a.msie&&9>parseInt(a.version);d.superclass.constructor.call(this,$.extend({},h,b||{}));this.elem.addClass("bub sm");this.isIE78?g=f=0:this.elem.prepend('<div class="arr" />')};d.prototype={getOffset:function(){var b=this.elem,a=this.getAnchorDetails(),c=this.getPlacement(a),e={};b.removeClass("top left bottom right").addClass(c);
switch(c){case "bottom":e={top:a.top+a.height+g/2,left:a.left};break;case "top":e={top:a.top-b.outerHeight()-10,left:a.left+a.width/2-f};break;case "right":e={top:a.top-g,left:a.left+a.width+f/2};break;case "left":e={top:a.top-g,left:a.left-b.outerWidth()-f}}return e},getAnchorDetails:function(){var b=this.anchor[0];return $.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.anchor.offset())},getPlacement:function(b){var a=
this.options;if(a.placement)return a.placement.toLowerCase();var a=$(window),c=this.elem,e=a.width(),d=c.outerWidth(),c=c.outerHeight(),f=a.scrollTop();a.scrollLeft();return 0<b.top-f-c/2?e-b.left>d+18+20?"right":"left":0<b.top-c/2?"bottom":"top"},showBubble:function(b){this.show($(b.currentTarget));return!1},show:function(b,a){this.anchor=b;this.publish("bubbleshow",{cmp:this});var c=b.attr("data-content");c&&(this.isShown&&this.hide(),d.superclass.show.call(this,{content:c},a||{}))},delegate:function(){var b=
this.options;if(b.selector)$(b.selector).on(b.trigger,$.proxy(this.showBubble,this));d.superclass.delegate.call(this)}};return d});(function(a){var d=function(){var b=a("#user_image"),d=b.find(".pen"),c=b.find(".acts");b.find(".noUpld.edit_icn").on("click",function(a){"none"==c.css("display")?c.slideDown():c.slideUp();a.stopPropagation()});a(".usrimg .acts").on("click",function(a){a.stopPropagation()});a("body").on("click",function(){"none"!=c.css("display")&&c.slideUp()});b.find(".upld").on("click",function(){a.rover&&a.rover.track("p2545226.m2531.l4580")});a.extend(this,{userImage:null,enableEdit:function(){userImage=this;
b.addClass("edit");userImage.showEditBtns();-1<navigator.userAgent.indexOf("Safari")&&(a(".usrimg.edit").css("margin-left","-1px"),a(".usrimg .acts").css("bottom","0px"))},showEditBtns:function(){userImage.closeEdit();"https://ir.ebaystatic.com/pictures/aw/social/avatar.png"==b.find(".prof_img").attr("src")?b.find(".upld.pen").show():b.find(".noUpld.pen").show();a(".usrimg.edit .acts .upld").mousemove(function(b){var c=-1<navigator.userAgent.indexOf("IE")?100:30,d=a(this).offset(),b=b.pageX-d.left;
a(this).find(".imgbin").css("margin-left",b-c)});a(".usrimg.edit .icon").hover(function(){a(this).find(".icons").removeClass("pen").addClass("pen_actv")},function(){a(this).find(".icons").removeClass("pen_actv").addClass("pen")})},closeEdit:function(){c.slideUp();d.hide()},updateFinished:function(b){if(-1<navigator.userAgent.indexOf("IE 8")){var c=a(".usrimg.edit").find(".icon");c.css("display","block");c.css("text-align","left");c.find(".acts").css("left","0px");c.find(".acts").css("bottom","0px")}mu.elem.find(".prof_img").attr("src",
b);userImage.showEditBtns()},doneEditing:function(){userImage.closeEdit();b.removeClass("edit");-1<navigator.userAgent.indexOf("Safari")&&a(".usrimg").css("margin-left","0px")}})};a.cmp=a.cmp||{};a.cmp.profileImg=function(){return new d}})(jQuery);var profileUtil={init:function(){profileUtil.replaceUserUrlHref()},replaceUserUrlHref:function(){var a=$(".mbg-id").contents().get(1).nodeValue;$(".mbg-id").attr("href","/usr/"+a)}};profileUtil.init();raptor.defineClass("component/index_card/business_info_overlay",function(){return{init:function(){this.getChild("businessinfooverlay").subscribe({show:function(){$(document).trigger("rover",{sid:"p2545226.m2531.l9259",sellerId:sellerId,viewerId:viewerId,phone:pn,siteid:siteId})}},this)}}});define.Class("ui.Overlay",function(){var o,i,f,p;o={triggers:null,triggerMode:"click",closers:".ovly_close",closeMode:"click",mask:{},modal:!1,width:"auto",height:"auto",hasCloseButton:!0,closeOnEsc:!0,closeText:"close",position:"center",top:null,left:null,shiftness:{x:0,y:0},draggable:!1,onBeforeOpen:null,onAfterOpen:null,onBeforeClose:null,onAfterClose:null,ajax:null,css3Enabled:!1,ns:"ovly",pointerType:null,delay:null,content:null};i={mask:null,show:function(c,b){var e=i.mask;e||(e=$("<div class='ovly_mask'><div>"),
$("body").append(e),i.mask=e);var a=c.color?c.color:"#000",d=c.alpha&&"number"===$.type(c.alpha)?c.alpha:0.6,j=c.zIndex&&"number"===$.type(c.zIndex)?c.zIndex:100010;e.css({"background-color":a,"z-index":j,opacity:d,filter:"alpha(opacity="+100*d+")",display:"block"});b.css("z-index",j+10)},hide:function(c,b){i.mask.css("display","none");"true"==b&&c.focus()}};f={center:function(c){var b=$(window),e=c.outerWidth({margin:!0}),a=c.outerHeight({margin:!0});c.css("top",Math.max((b.height()-a)/2,0)+"px");
c.css("left",Math.max((b.width()-e)/2,0)+"px");c.css("position","fixed")},trigger:function(c,b,e,a){var d=b.outerHeight({margin:!0}),b=b.position();$(document).scrollTop();$(document).scrollLeft();c.css("top",d+b.top+a+"px");c.css("left",b.left+e+"px")},customize:function(c,b,e){c.css("top",b+"px");c.css("left",e+"px")},pointer:function(c,b,e){var a=c.find(".prt");a.removeClass("vert left right top bottom");var d=$(window).height(),j=$(window).width(),g=$(document).scrollTop(),h=$(document).scrollLeft(),
m=b.outerHeight({margin:!0}),n=b.outerWidth({margin:!0}),f=c.outerHeight({margin:!0}),i=c.outerWidth({margin:!0}),b=b.position(),k=0,l=0;"vertical"==e?(a.addClass("vert"),0<=b.left+i-h?(k=b.left,a.addClass("left")):(k=b.left-i+n,a.addClass("right")),b.top-m-g>=f?(l=b.top-f,a.addClass("bottom")):(l=b.top+16+m,a.addClass("top"))):(b.left+n+16+i-h>=j?(k=b.left-16-i,a.addClass("right")):(k=b.left+n+16,a.addClass("left")),b.top+m+f-40-g>=d?(l=b.top-f+70,a.addClass("bottom")):(l=b.top-40,a.addClass("top")));
c.css({left:k,top:l})}};p={register:function(c,b){var e=null;b.mousedown(function(a){var d=c.position().left-$(window).scrollLeft(),j=c.position().top-$(window).scrollTop(),g=a.pageX-d,h=a.pageY-j;e=function(a){c.css("left",a.pageX-g+"px");c.css("top",a.pageY-h+"px")};$("body").mousemove(e);b.css("cursor","move")});$("body").mouseup(function(){$("body").unbind("mousemove",e);b.css("cursor","auto")})}};return{events:["show","hide"],init:function(c){var b;b="";b=this.conf=$.extend(!0,{},o,c);this.content=
b.content?$(b.content):$("#"+c.id);this.body=this.container=null;this.handlrBinded=this.inited=!1;var e="",a="";b.hasCloseButton&&(e="<a role='button' href='javascript:;' class='clz' title='"+b.closeText+"'/>");"pointer"==b.position&&(a="<div class='prt'></div>");b=b.css3Enabled?"<div role='alertdialog' aria-hidden='true' class='"+b.ns+" shadow'><div class='hdr'></div><div class='ovly_container' tabindex='0'></div><div>"+a+e+"</div></div>":"<div role='alertdialog' aria-hidden='true' class='"+b.ns+
" old' style='display: block; z-index: 100010;'>"+a+"<div class='hdr'><b class='bk'></b><div class='inner'></div></div><div class='body'><div class='ovly_container' tabindex='0' ></div></div><div class='clr'></div><div class='ftr bk'><b class='bk'></b><div class='inner bk'>&nbsp;</div></div>"+e+"</div>";this.panel=$(b);c.width&&"auto"!==c.width&&this.panel.width(c.width);this.handlrBinded||this.bindHandlr()},bindHandlr:function(){this.handlrBinded=!0;this.bindTriggerEvent()},bindTriggerEvent:function(){var c=
this,b=null,e=c.conf;if("string"===$.type(e.trigger))for(var b=[],a=e.trigger.split(","),d=0;d<a.length;d++)b[d]=$.trim(a[d]);else $.isArray(e.trigger)&&(b=e.trigger);null!=b&&$.each(b,function(a,b){var d=$("#"+b);"click"==e.triggerMode?d.mousedown(function(a){c.show(a,$(this),"false")}):"mouseover"==e.triggerMode&&d.mouseover(function(a){if(0<e.delay){var b=$(this),g=setTimeout(function(){c.show(a,b,"false")},e.delay);d.mouseleave(function(){clearTimeout(g)})}else c.show(a,$(this),"false")});d.on("keydown",
function(a){"13"==(a.keyCode||a.which)&&c.show(a,$(this),"true")});"mouseout"==e.closeMode&&d.mouseleave(function(){var a,b;a=setTimeout(function(){clearTimeout(a);c.hide()},400);c.panel.mouseleave(function(){b=setTimeout(function(){clearTimeout(b);c.hide()},400)});c.panel.mouseover(function(){clearTimeout(a);clearTimeout(b)})})})},focusTabbable:function(){var c=this.panel,b=c.find("[autofocus]");b.length||(b=$('[tabindex="0"],a,input,select,button',c).filter(":visible"));b.length||(b=c);b[0].focus()},
bindCloserEvent:function(){var c=null,b=this,e=b.conf;if("string"===$.type(e.closer))for(var c=[],a=e.closer.split(","),d=0;d<a.length;d++)c[d]=$.trim(a[d]);else $.isArray(e.closer)&&(c=e.closer);null!=c&&$.each(c,function(a,c){var d=$("#"+c);"click"==e.closeMode&&$(d).click({overlay:b},b.hideOverlay)});e.closeOnEsc&&$(document).bind("keydown",function(a){27==a.keyCode&&b.hide()})},bindKeydownEvent:function(){var c=this,b=c.conf,e=c.panel;e.on("keydown",function(a){if(b.escape&&!a.isDefaultPrevented()&&
a.keyCode&&27===a.which)a.preventDefault(),c.hide();else if(9===a.which){var d=$('[tabindex="0"],a,input,select,button',e).filter(":visible");if(!(0>=d.length)){var f=d.filter(":first"),d=d.filter(":last"),g=a.shiftKey,h=a.target;if((h===d[0]||h===e[0])&&!g)f.focus(),a.preventDefault();else if((h===f[0]||h===e[0])&&g)d.focus(),a.preventDefault()}}})},show:function(c,b,e){var a=this,d=a.conf,c=a.panel.find(".hdr"),j=d.draggable?0:d.hasCloseButton?10:22;a.publish("beforeshow",{source:a});if(!a.inited){$("body").append(a.panel);
a.container=a.panel.find(".ovly_container");a.body=a.panel.find(".body");if(null!=a.content)a.container.append(a.content);else var g=function(b){a.container.append(b)};d.ajax&&d.ajax.callback&&(g=function(b){d.ajax.callback(b);var b=a.container.outerHeight(!0),c=a.container.outerWidth(!0);a.body.css({height:b-j+"px",width:c+"px"})});d.ajax&&d.ajax.url&&$.ajax({url:d.ajax.url,type:d.ajax.method,contentType:d.ajax.contentType,data:d.ajax.data,dataType:d.ajax.dataType,async:1,success:g});a.bindCloserEvent();
a.bindKeydownEvent()}a.panel.find(".clz").click(function(){a.hide(b,e)});a.inited=!0;a.panel.css("display","block");a.panel.attr("aria-hidden",!1);if(null!=a.content){a.content.css("display","block");var h,g=parseInt("auto"==d.height?a.content.outerHeight(!0):d.height);h=parseInt("auto"==d.width?a.content.outerWidth(!0):d.width);a.body.css({height:g+c.height(),width:h});a.container.css({height:g+c.height(),width:h})}d.modal&&i.show(d.mask,a.panel);"trigger"==d.position?(shiftx=parseInt(d.shiftness.x),
shifty=parseInt(d.shiftness.y),f.trigger(a.panel,b,shiftx,shifty),$(window).on("resize scroll",function(){f.trigger(a.panel,b,shiftx,shifty)})):"customize"==d.position?(f.customize(a.panel,d.top,d.left),$(window).on("resize scroll",function(){f.customize(a.panel,d.top,d.left)})):"pointer"==d.position?(f.pointer(a.panel,b,d.pointerType),$(window).on("resize scroll",function(){f.pointer(a.panel,b,d.pointerType)})):(f.center(a.panel),$(window).on("resize scroll",function(){f.center(a.panel)}));d.draggable&&
p.register(a.panel,c);a.publish("show",{source:a});a.focusTabbable()},hide:function(c,b){this.publish("beforehide",{source:this});this.panel.find(".clz").unbind("click");this.panel.css("display","none");this.panel.attr("aria-hidden",!0);this.conf.modal&&i.hide(c,b);this.publish("hide",{source:this});null!=c&&"true"==b&&c.focus()},hideOverlay:function(c){c.data.overlay.hide()}}});define("follow/service/config",function(){return{PROXY_HOST:"http://www.proxy.ebay.com.au",FOLLOW_SERVICE_HOST:"http://www.mbeupdater.vip.ebay.com",INTEREST_SERVICE_HOST:"http://feedsvcr.vip",WEBCOMMAND_SERVICE_HOST:"http://www.ebay.com.au"}});define("follow/service/constants",function(){return{ENTITY_COLLECTION:"collection",ENTITY_PERSON:"person",ENTITY_INTEREST:"interest",GET_INTEREST_ID:"getInterestId",PROXY:"proxy",SERVICE_TIMEOUT:6E3,ERROR_CODE_AUTH:"0",ERROR_CODE_CSRF:"1",ERROR_CODE_MAX_FOLLOWS:"5",ERROR_CODE_DEFAULT:"100",FOLLOW:"follow",UPDATE:"update",UNFOLLOW:"unfollow"}});define("follow/service/serviceTemplates",function(){return{collection:{data:'{"user":{"id":"{USER_ID}","type":"USERNAME","convert_to":"ACCOUNT_ID"}}',service:"{SERVICE_HOST}/merchbupd/v0/feed/users/{user}/follows/COLLECTION/{ENTITY_ID}",hostName:"FOLLOW_SERVICE_HOST"},person:{data:'{"user":{"id":"{USER_ID}","type":"USERNAME","convert_to":"ACCOUNT_ID"}, "person":{"id":"{ENTITY_ID}","type":"USERNAME","convert_to":"ACCOUNT_ID"}}',service:"{SERVICE_HOST}/merchbupd/v0/feed/users/{user}/follows/USER/{person}",
hostName:"FOLLOW_SERVICE_HOST"},interest:{data:'{"user":{"id":"{USER_ID}","type":"USERNAME","convert_to":"ACCOUNT_ID"}}',service:"{SERVICE_HOST}/merchbupd/v0/feed/users/{user}/follows/INTEREST/{ENTITY_ID}",hostName:"FOLLOW_SERVICE_HOST"},getinterestid:{service:"{SERVICE_HOST}/feedservice/interestservice/v1/ss/interest-id?url={SAVED_SEARCH_URL}",hostName:"INTEREST_SERVICE_HOST"},proxy:{service:"{PROXY_HOST}/proxy?method={METHOD}&_csrf={CSRF}&data={DATA}&url={SERVICE_URL}",hostName:"PROXY_HOST"},follow:{service:"{SERVICE_HOST}/sch/favsearch?_efs=true&emailme={EMAIL_FLAG}&savedsearch={SEARCH_URL}&csrf={CSRF}&searchname={ENTITY_NAME}&ssid={ENTITY_ID}&mode=2&visibility={VISIBILITY}",
hostName:"WEBCOMMAND_SERVICE_HOST"},update:{service:"{SERVICE_HOST}/sch/favsearch?_efs=true&emailme={EMAIL_FLAG}&savedsearch={SEARCH_URL}&csrf={CSRF}&searchname={ENTITY_NAME}&replaceid={ENTITY_ID}&mode=3",hostName:"WEBCOMMAND_SERVICE_HOST"},unfollow:{service:"{SERVICE_HOST}/sch/favsearch?_efs=true&csrf={CSRF}&replaceid={ENTITY_ID}&mode=4",hostName:"WEBCOMMAND_SERVICE_HOST"},folloAjax:{follow:{service:"{SVC_HOST}/fol/follow?{ENTITY_TYPE}{ENTITY_ID}{SEARCH_URL}{EMAIL}{NAME}{VISIBILITY}{CSRF}",hostName:"WEBCOMMAND_SERVICE_HOST"},
update:{service:"{SVC_HOST}/fol/update?{ENTITY_TYPE}{ENTITY_ID}{EMAIL}{NAME}{VISIBILITY}{CSRF}",hostName:"WEBCOMMAND_SERVICE_HOST"},unfollow:{service:"{SVC_HOST}/fol/unfollow?{ENTITY_TYPE}{ENTITY_ID}{CSRF}",hostName:"WEBCOMMAND_SERVICE_HOST"}}}});define("follow/service/ajaxHandler",["follow/service/constants"],function(e){return function(a,d){if(a){var f=$.Deferred(),b={dataType:a.dataType||"jsonp",timeout:a.timeout||e.SERVICE_TIMEOUT},c=a.crossDomain;void 0!==c&&null!==c&&(b.crossDomain=c);b=$.ajax(a.url,b);b.done(d.successCb);b.fail(d.failCb);return f}}});define("follow/service/service",["follow/service/webCommand","follow/service/serviceProxy","follow/service/constants"],function(j,k,i){return{_shouldUsewebcommand:function(a){var c=a.entityId,b=a.searchUrl;return a.useFolloAjaxCommands?!0:a.entityType===i.ENTITY_INTEREST&&(null!==c&&void 0!==c||null!==b&&void 0!==b)},_pseudoUpdate:function(a,c,b,d,f,h){var g=$.Deferred(),d=j.callService(i.FOLLOW,{emailFlag:0,searchUrl:d,csrf:c,entityName:f,visibility:h.toUpperCase()});d.done(function(e){k.callService("DELETE",
a,b,i.ENTITY_INTEREST,c).done(function(){g.resolve(e)}).fail(function(){g.reject(e)})});d.fail(function(a){g.reject(a)});return g.promise()},follow:function(a){var c=a.userId,b=a.entityId,d=a.entityName,f=a.entityType,h=a.csrf,g=a.csrf_folloAjax,e=a.searchUrl,m=a.visibility,l=a.useFolloAjaxCommands;return this._shouldUsewebcommand({entityId:b,entityType:f,useFolloAjaxCommands:l,searchUrl:e})?j.callService(i.FOLLOW,{emailFlag:0,searchUrl:e,csrf:h,csrf_folloAjax:g,entityName:d,entityId:b,entityType:f,
visibility:m,useFolloAjaxCommands:l,isSecure:a.isSecure}):k.callService("PUT",c,b,f,h)},unfollow:function(a){var c=a.userId,b=a.entityId,d=a.entityType,f=a.csrf,h=a.csrf_folloAjax,g=a.interestId,e=a.useFolloAjaxCommands,a=a.isSecure;this._shouldUsewebcommand({entityId:b,entityType:d,useFolloAjaxCommands:e})?c=j.callService(i.UNFOLLOW,{csrf:f,csrf_folloAjax:h,entityId:b,entityType:d,useFolloAjaxCommands:e,isSecure:a}):(b=d===i.ENTITY_INTEREST?b||g:b,c=k.callService("DELETE",c,b,d,f));return c},updateInterest:function(a,
c,b,d,f,h,g){var e=$.Deferred(),a=b?j.callService(i.UPDATE,{searchUrl:f,csrf:c,entityName:h,entityId:b}):this._pseudoUpdate(a,c,d,f,h,g);a.done(function(a){k.getInterestId(f,c).done(function(b){a.interestId=b.interestId;e.resolve(a)}).fail(function(){e.reject(a)})});a.fail(function(a){e.reject(a)});return e.promise()},nameInterest:function(a){return this._modifyInterest(a)},emailOptInOut:function(a){return this._modifyInterest(a)},_modifyInterest:function(a){return j.callService(i.UPDATE,a)}}});define("follow/service/serviceProxy",["follow/service/config","follow/service/constants","follow/service/serviceTemplates","follow/service/ajaxHandler"],function(k,e,l,i){return{_getUrl:function(a,c){var d=void 0!==a&&null!==a?a.toLowerCase():null,d=null!==d&&l[d],b,g,h=c.userId,f=c.entityId,e=d.hostName,j=c.savedSearchUrl,i=k.PROXY_HOST,h=void 0!==h&&null!==h?h:"",f=void 0!==f&&null!==f?f:"",e=void 0!==e&&null!==e?k[e]:"",j=void 0!==j&&null!==j?encodeURIComponent(c.savedSearchUrl):"";void 0!==d&&
null!==d&&(b=d.data,b=void 0!==b&&null!==b?b:"",g=d.service);void 0!==b&&null!==b&&(b=encodeURIComponent(b.replace("{USER_ID}",h).replace("{ENTITY_ID}",f)));void 0!==g&&null!==g&&(g=encodeURIComponent(g.replace("{SERVICE_HOST}",e).replace("{ENTITY_ID}",f).replace("{SAVED_SEARCH_URL}",j)));return l.proxy.service.replace("{PROXY_HOST}",i).replace("{SERVICE_URL}",g).replace("{METHOD}",c.httpMethod).replace("{CSRF}",c.csrf).replace("{DATA}",b)},callService:function(a,c,d,b,g){var h=this,f=i({url:this._getUrl(b,
{httpMethod:a,userId:c,entityId:d,csrf:g}),timeout:e.SERVICE_TIMEOUT,dataType:"jsonp"},{successCb:function(){h._successCallback.apply(f,arguments)},failCb:function(){h._failureCallback.apply(f)}});return f.promise()},_successCallback:function(a){if(!0===a.okay)this.resolve();else{var c=e.ERROR_CODE_DEFAULT;if(a.errors&&-1!==a.errors.indexOf("FollowLimitExceededException"))c=e.ERROR_CODE_MAX_FOLLOWS;else if((a=a.errorMessage&&a.errorMessage.error)&&a[0]&&a[0].errorId)c=a[0].errorId;this.reject(c)}},
_failureCallback:function(){this.reject(e.ERROR_CODE_DEFAULT)},getInterestId:function(a,c){var d=this,b=i({url:this._getUrl(e.GET_INTEREST_ID,{savedSearchUrl:a,httpMethod:"GET",csrf:c,data:""}),dataType:"jsonp",timeout:e.SERVICE_TIMEOUT},{successCb:function(){d._getInterestIdSuccessCallback.apply(b,arguments)},failCb:function(){d._getInterestIdFailureCallback.apply(b)}});return b.promise()},_getInterestIdSuccessCallback:function(a){!0===a.okay?this.resolve(a.data):this.reject(a.errorMessage)},_getInterestIdFailureCallback:function(){this.reject()}}});define("follow/service/webCommand",["follow/service/config","follow/service/constants","follow/service/ajaxHandler","follow/service/serviceTemplates","follow/utils"],function(n,e,o,p,q){return{_getUrlFolloAjax:function(a,b){var d=void 0!==a&&null!==a?a.toLowerCase():null,d=null!==d&&p.folloAjax[d],c=void 0!==d&&null!==d?d.service:null,f=b.serviceHost,h=b.visibility,g,m=b.csrf_folloAjax&&"&srt="+b.csrf_folloAjax,i,j,f=b.entityType,k,l;f==e.ENTITY_INTEREST?(g=b.emailFlag&&"&emailMe=true",i=b.entityId&&
"&entityId="+b.entityId,j="followType="+e.ENTITY_INTEREST,k=b.entityName&&"&name="+encodeURIComponent(b.entityName),l=b.searchUrl&&"&searchUrl="+encodeURIComponent(b.searchUrl)):f==e.ENTITY_PERSON&&(i=b.entityId&&"&userName="+b.entityId,j="followType=user");f=void 0!==n&&null!==n?n[d.hostName]:"";b.isSecure&&(f=q.createSecureHost(f));h=void 0!==h&&null!==h&&"PUBLIC"===h?"&visibility=true":"&visibility=false";void 0!==c&&null!==c&&(c=c.replace("{SVC_HOST}",f).replace("{EMAIL}",g||"").replace("{CSRF}",
m).replace("{ENTITY_ID}",i||"").replace("{ENTITY_TYPE}",j||"").replace("{SEARCH_URL}",l||"").replace("{NAME}",k||"").replace("{VISIBILITY}",h||""));return c},_getUrl:function(a,b){var d=void 0!==a&&null!==a?a.toLowerCase():null,c=null!==d&&p[d],f=void 0!==c&&null!==c?c.service:null,h=b.serviceHost,g=b.emailFlag,m=b.searchUrl,i=b.csrf,j=b.entityName,k=b.entityId,l=b.visibility,g=void 0!==g&&null!==g?g:"",h=void 0!==n&&null!==n?n[c.hostName]:"";b.isSecure&&(h=q.createSecureHost(h));m=void 0!==m&&null!==
m?m:"";i=void 0!==i&&null!==i?i:"";j=void 0!==j&&null!==j?j:"";k=void 0!==k&&null!==k?k:"";l=void 0!==l&&null!==l?l:"";void 0!==f&&null!==f&&(f=f.replace("{SERVICE_HOST}",h),d===e.UPDATE&&(g=0===g||1===g?g:""),f=f.replace("{EMAIL_FLAG}",g).replace("{SEARCH_URL}",encodeURIComponent(m)).replace("{CSRF}",i).replace("{ENTITY_NAME}",encodeURIComponent(j)).replace("{ENTITY_ID}",k).replace("{VISIBILITY}",l));return f},_callServiceFolloAjax:function(a,b){var d=this,c=o({url:this._getUrlFolloAjax(a,{emailFlag:b.emailFlag,
searchUrl:b.searchUrl,csrf_folloAjax:b.csrf_folloAjax,entityName:b.entityName,entityId:b.entityId,entityType:b.entityType,visibility:b.visibility,isSecure:b.isSecure}),timeout:e.SERVICE_TIMEOUT,dataType:"jsonp",crossDomain:!0},{successCb:function(){d._successCallbackFolloAjax.apply(c,arguments)},failCb:function(){d._failureCallback.apply(c)}});return c.promise()},callService:function(a,b){if(b.useFolloAjaxCommands)return this._callServiceFolloAjax(a,b);var d=this,c=o({url:this._getUrl(a,{emailFlag:b.emailFlag,
searchUrl:b.searchUrl,csrf:b.csrf,entityName:b.entityName,entityId:b.entityId,visibility:b.visibility,isSecure:b.isSecure}),timeout:e.SERVICE_TIMEOUT,dataType:"jsonp",crossDomain:!0},{successCb:function(){d._successCallback.apply(c,arguments)},failCb:function(){d._failureCallback.apply(c)}});return c.promise()},_successCallbackFolloAjax:function(a){a.model.m_saveSearchURL=a.model.saveSearchURL;a.model.m_signedIn=a.model.signedIn;a.model.m_searchId=a.model.interestId;a.model.m_searchName=a.model.name;
a.model.m_emailMe=a.model.emailMe?1:0;a.model.visibility=a.model.visibility?a.model.visibility.toLowerCase():"private";a.model.m_errorList=a.model.error;delete a.model.saveSearchURL;delete a.model.signedIn;delete a.model.interestId;delete a.model.name;delete a.model.emailMe;delete a.model.error;a=a.model||{};"success"===a.status?a.m_searchId&&0<a.m_searchId.length?this.resolve({ssid:a.m_searchId.toString()||null}):this.resolve():!1===a.m_signedIn?this.reject(e.ERROR_CODE_AUTH):a.m_errorList&&a.m_errorList.code&&
-1!==a.m_errorList.code.indexOf("maxed_saved_search")?this.reject(e.ERROR_CODE_MAX_FOLLOWS):a.m_errorList&&a.m_errorList.code&&-1!==a.m_errorList.code.indexOf("csrf_invalid")?this.reject(e.ERROR_CODE_CSRF):this.reject(e.ERROR_CODE_DEFAULT)},_successCallback:function(a){a=a.model||{};"success"===a.status?this.resolve({ssid:a.m_searchId.toString()||null}):!1===a.m_signedIn?this.reject(e.ERROR_CODE_AUTH):a.m_errorList&&(-1!==a.m_errorList.indexOf("MAXED_SAVED_SEARCH")||-1!==a.m_errorList.indexOf("FollowLimitExceededException"))?
this.reject(e.ERROR_CODE_MAX_FOLLOWS):a.m_errorList&&-1!==a.m_errorList.indexOf("CSRF_INVALID")?this.reject(e.ERROR_CODE_CSRF):this.reject(e.ERROR_CODE_DEFAULT)},_failureCallback:function(){this.reject(e.ERROR_CODE_DEFAULT)}}});define("follow/config/config",function(){return{FEED_URL:"http://www.ebay.com.au",PROFILE_URL:"http://www.ebay.com.au/usr/{username}",PRIVACY_URL:"http://www.ebay.com.au/usr/{username}/all-follows?priflwtype={type}#{type}",LOGIN_HOST:"https://signin.ebay.com.au",BASE_URL:"http://www.ebay.com.au"}});(function(){var a={BUTTON_FOLLOW:["Follow"],BUTTON_FOLLOWING:["Following"],BUTTON_UNFOLLOW:["Unfollow"],LINK_FOLLOW_PERSON:["Follow this seller"],LINK_FOLLOWING_PERSON:["Following this seller"],LINK_SAVE_PERSON:["Save this seller"],LINK_SAVED_PERSON:["Saved"],LINK_UNFOLLOW_PERSON:["Unfollow this seller"],LINK_FOLLOW_INTEREST:["Follow this search"],LINK_FOLLOWING_INTEREST:["Following this search"],LINK_SAVE_INTEREST:["Save this search"],LINK_SAVED_INTEREST:["Saved"],LINK_UNFOLLOW_INTEREST:["Unfollow this search"],
ERROR:["Sorry, there was an error. Please try again."],ERROR_MAX_SAVE_INTEREST:["You've already saved 100 searches (the max allowed). You need to unsave a search before you can save another. Go to your ",{name:"SPH",attrib:{linkId:"/usr/{username}",type:"Link"},childs:["profile"],text:"profile"},"."],ERROR_MAX_INTEREST:["You're already following 100 interests (the max allowed). You need to unfollow an interest before you can follow another. Go to your ",{name:"SPH",attrib:{linkId:"/usr/{username}",
type:"Link"},childs:["profile"],text:"profile"},"."],ERROR_MAX_COLLECTION:["You're already following 100 collections (the max allowed). You need to unfollow a collection before you can follow another. Go to your ",{name:"SPH",attrib:{linkId:"/usr/{username}",type:"Link"},childs:["profile"],text:"profile"},"."],ERROR_MAX_PERSON:["You're already following 100 members (the max allowed). You need to unfollow a member before you can follow another. Go to your ",{name:"SPH",attrib:{linkId:"/usr/{username}",
type:"Link"},childs:["profile"],text:"profile"},"."],ERROR_MAX_SAVE_PERSON:["You've already saved 100 sellers (the max allowed). You need to unsave a seller before adding another. Go to your ",{name:"SPH",attrib:{linkId:"/usr/{username}",type:"Link"},childs:["profile"],text:"profile"},"."],DISCOVERY:["Follow to see new items in your feed and get email alerts."],OVERLAY_SAVE_PERSON:["Save this seller to see what they're selling in your ",{name:"SPH",attrib:{linkId:"/",linkIdType:"URL",type:"Link"},
childs:["Feed"],text:"Feed"},"."],OVERLAY_FOLLOW_PERSON:["Follow to see this member's favourite items in your ",{name:"SPH",attrib:{linkId:"/",linkIdType:"URL",type:"Link"},childs:["eBay feed"],text:"eBay feed"},"."],OVERLAY_FOLLOW_INTEREST:["Follow to see more in your ",{name:"SPH",attrib:{linkId:"/",linkIdType:"URL",type:"Link"},childs:["eBay feed"],text:"eBay feed"},"."],OVERLAY_SAVE_INTEREST:["Save this search to see updates in your ",{name:"SPH",attrib:{linkId:"/",linkIdType:"URL",type:"Link"},
childs:["Feed"],text:"Feed"},"."],OVERLAY_FOLLOW_COLLECTION:["Follow to see collection updates in your ",{name:"SPH",attrib:{linkId:"/",linkIdType:"URL",type:"Link"},childs:["eBay feed"],text:"eBay feed"},"."],OVERLAY_UNFOLLOW_PERSON:["Unfollow to stop seeing updates in your feed."],OVERLAY_SAVED_PERSON:["Unsave to stop seeing updates in your feed."],OVERLAY_UNFOLLOW_INTEREST:["Unfollow to stop seeing updates in your feed."],OVERLAY_SAVED_INTEREST:["Unsave to stop seeing updates in your feed."],OVERLAY_UNFOLLOW_COLLECTION:["Unfollow to stop seeing updates in your feed."],
OVERLAY_LABEL_EMAIL:["Email me new items that match this interest"],OVERLAY_FOLLOWED_PERSON_PUBLIC:["You'll see updates in your ",{name:"SPH",attrib:{linkId:"/",linkIdType:"URL",type:"Link"},childs:["eBay feed"],text:"eBay feed"},".",{name:"DPH",attrib:{id:"icon"}},"Public. Change your ",{name:"SPH",attrib:{linkId:"/usr/{username}/all-follows?priflwtype={type}#{privacytype}",linkIdType:"URL",type:"Link"},childs:["privacy preferences"],text:"privacy preferences"},"."],OVERLAY_FOLLOWED_PERSON_PRIVATE:["You'll see updates in your ",
{name:"SPH",attrib:{linkId:"/",linkIdType:"URL",type:"Link"},childs:["eBay feed"],text:"eBay feed"},".",{name:"DPH",attrib:{id:"icon"}},"Private. Change your ",{name:"SPH",attrib:{linkId:"/usr/{username}/all-follows?priflwtype={type}#{privacytype}",linkIdType:"URL",type:"Link"},childs:["privacy preferences"],text:"privacy preferences"},"."],OVERLAY_FOLLOWED_INTEREST_PUBLIC:["You'll see updates in your ",{name:"SPH",attrib:{linkId:"/",linkIdType:"URL",type:"Link"},childs:["eBay feed"],text:"eBay feed"},
".",{name:"DPH",attrib:{id:"icon"}},"Public. Change your ",{name:"SPH",attrib:{linkId:"/usr/{username}/all-follows?priflwtype={type}#{privacytype}",linkIdType:"URL",type:"Link"},childs:["privacy preferences"],text:"privacy preferences"},"."],OVERLAY_FOLLOWED_INTEREST_PRIVATE:["You'll see updates in your ",{name:"SPH",attrib:{linkId:"/",linkIdType:"URL",type:"Link"},childs:["eBay feed"],text:"eBay feed"},".",{name:"DPH",attrib:{id:"icon"}},"Private. Change your ",{name:"SPH",attrib:{linkId:"/usr/{username}/all-follows?priflwtype={type}#{privacytype}",
linkIdType:"URL",type:"Link"},childs:["privacy preferences"],text:"privacy preferences"},"."],OVERLAY_FOLLOWED_COLLECTION_PUBLIC:["You'll see updates in your ",{name:"SPH",attrib:{linkId:"/",linkIdType:"URL",type:"Link"},childs:["eBay feed"],text:"eBay feed"},".",{name:"DPH",attrib:{id:"icon"}},"Public. Change your ",{name:"SPH",attrib:{linkId:"/usr/{username}/all-follows?priflwtype={type}#{privacytype}",linkIdType:"URL",type:"Link"},childs:["privacy preferences"],text:"privacy preferences"},"."],
OVERLAY_FOLLOWED_COLLECTION_PRIVATE:["You'll see updates in your ",{name:"SPH",attrib:{linkId:"/",linkIdType:"URL",type:"Link"},childs:["eBay feed"],text:"eBay feed"},".",{name:"DPH",attrib:{id:"icon"}},"Private. Change your ",{name:"SPH",attrib:{linkId:"/usr/{username}/all-follows?priflwtype={type}#{privacytype}",linkIdType:"URL",type:"Link"},childs:["privacy preferences"],text:"privacy preferences"},"."],SAVE:["Save"],CANCEL:["Cancel"],EDIT_INTEREST_NAME:["Edit interest name"],CLICK_TO_FOLLOW_ENTITY_NAME:["Click to follow ",
{name:"DPH",attrib:{id:"entityName"}},"."],CLICK_TO_UNFOLLOW_ENTITY_NAME:["Click to unfollow ",{name:"DPH",attrib:{id:"entityName"}},"."]};define("follow/content",function(){return a});"undefined"!==typeof module&&(module.exports=a)})();define("follow/constants",function(){return{ENTITY_COLLECTION:"collection",ENTITY_PERSON:"person",ENTITY_INTEREST:"interest",DATA_USER_ID:"userId",DATA_ID:"id",DATA_ENTITY_TYPE:"entityType",DATA_ENTITY_NAME:"entityName",DATA_ENTITY_ID:"entityId",DATA_INTEREST_ID:"interestId",DATA_CSRF:"csrf",DATA_CSRF_FOLLOAJAX_FOLLOW:"csrf_folloAjax_follow",DATA_CSRF_FOLLOAJAX_UPDATE:"csrf_folloAjax_update",DATA_CSRF_FOLLOAJAX_UNFOLLOW:"csrf_folloAjax_unfollow",DATA_USE_FOLLOAJAX_COMMAND_FLAG:"useFolloAjaxCommands",
DATA_USE_HEART_SAVE_VERSION_FLAG:"isHeartSaveVersion",DATA_FOLLOW_DISPLAY_KEY:"followDisplayKey",DATA_FOLLOWING_DISPLAY_KEY:"followingDisplayKey",DATA_IS_SECURE_FLAG:"isSecure",DATA_PAGE_ID:"pageId",DATA_MODULE_ID:"moduleId",DATA_SEARCH_URL:"searchUrl",DATA_VISIBILITY:"visibility",DATA_DISCOVERY_ENABLED:"discoveryEnabled",DATA_SHORT_LINK_TEXT:"shortLinkText",DATA_HIDE_OVERLAY:"hideOverlay",DATA_SCROLL_ON_REDIRECT:"scrollOnRedirect",DATA_FOLLOW_DATA:"followData",LOGIN_URL_TEMPLATE:"{LOGIN_HOST}/ws/ebayISAPI.dll?SignIn&ru={REDIRECT_URL}&pageType=3984",
REDIRECT_URL_TEMPLATE:"{HREF}{URL_SYMBOL}{CSRF_PARAM_KEY}={CSRF_PARAM_VALUE}{PSEUDO_WIDGET_ID}",SEARCH_PARAM_CSRF:"fol",HIDE_HOVER_AFTER_N_FOLLOWS:3,TRACKING_ID_FOLLOW:4741,TRACKING_ID_UNFOLLOW:4742,TRACKING_ID_EMAILOPTIN:4743,TRACKING_ID_EMAILOPTOUT:4744,TRACKING_ID_FEED:4745,TRACKING_ID_PROFILE:4746,TRACKING_ID_FOLLOW_CLICK:5864,TRACKING_ID_FOLLOW_FAILURE:5865,TRACKING_ID_UNFOLLOW_FAILURE:5866,TRACKING_ID_NAME_INTEREST:5883,TRACKING_FOL_TYPE:{COLLECTION:"0",PERSON:"1",INTEREST:"2"},NAME_INTEREST_ACTION:{CLICK:"1",
SAVE:"2",CANCEL:"3",ERROR:"4",SUCCESS:"5"},TRACKING_ACTION:{FOLLOW:"1",UNFOLLOW:"2"},ERROR_CODE_AUTH:"0",ERROR_CODE_CSRF:"1",ERROR_CODE_MAX_FOLLOWS:"5",ERROR_CODE_DEFAULT:"100",KEY_ENTER:13,KEY_SPACE:32,EVENT_EMAIL_OPTIN:"emailoptin",EVENT_EMAIL_OPTOUT:"emailoptout",PRIVACY_TYPE_MAPPING:{collection:"collection",person:"people",interest:"interest"},MIN_FOLLOW_DELAY:300,OVERLAY_SPACING:28,OVERLAY_HIDE_DELAY:600,OVERLAY_CLICKED_HIDE_DELAY:6E3,OVERLAY_BLUR_DELAY:10,OVERLAY_SHOW_DELAY:600,states:{FOLLOWED:"FOLLOWED",
UNFOLLOW:"UNFOLLOW",FOLLOW:"FOLLOW"},classes:{UNFOLLOW:"fol-unfollow",FOLLOWED:"fol-followed",BUSY:"fol-busy"}}});define("follow/counter",function(){var b=window;return{getCount:function(c,d){var a=["followCount",c,d].join("-"),e;"localStorage"in b&&(e=Number(b.localStorage[a]));return e||0},increment:function(c,d){var a=0;if("localStorage"in b){var e=["followCount",c,d].join("-"),a=Number(this.getCount(c,d))+1;try{b.localStorage[e]=a}catch(f){console.log(f)}}return a}}});define("follow/utils",["follow/constants","follow/config/config"],function(b,j){return{getSearchParams:function(a){var b={},d,c,a=a||window.location.search;$.each(a.substring(1).split("&"),function(a,g){d=g.split("=");c=d[0];g=d[1];c&&(b[c]=g)});return b},normalizeAttributes:function(a){return a?{userId:a[b.DATA_USER_ID]||"",entityType:a[b.DATA_ENTITY_TYPE]||"DEFAULT",entityName:a[b.DATA_ENTITY_NAME]||null,entityId:a[b.DATA_ENTITY_ID]||null,pseudoWidgetId:a[b.DATA_ENTITY_ID]||encodeURIComponent(a[b.DATA_SEARCH_URL])||
null,interestId:a[b.DATA_INTEREST_ID]||null,csrf:a[b.DATA_CSRF]||null,csrf_folloAjax_follow:a[b.DATA_CSRF_FOLLOAJAX_FOLLOW]||null,csrf_folloAjax_update:a[b.DATA_CSRF_FOLLOAJAX_UPDATE]||null,csrf_folloAjax_unfollow:a[b.DATA_CSRF_FOLLOAJAX_UNFOLLOW]||null,useFolloAjaxCommands:a[b.DATA_USE_FOLLOAJAX_COMMAND_FLAG]||!1,followDisplayKey:a[b.DATA_FOLLOW_DISPLAY_KEY]||null,followingDisplayKey:a[b.DATA_FOLLOWING_DISPLAY_KEY]||null,isHeartSaveVersion:a[b.DATA_USE_HEART_SAVE_VERSION_FLAG]||!1,isSecure:a[b.DATA_IS_SECURE_FLAG]||
!1,pageId:a[b.DATA_PAGE_ID]||null,moduleId:a[b.DATA_MODULE_ID]||null,searchUrl:a[b.DATA_SEARCH_URL]||null,visibility:a[b.DATA_VISIBILITY]||(a[b.DATA_ENTITY_TYPE]===b.ENTITY_INTEREST?"private":"public"),shortLinkText:"yes"===a[b.DATA_SHORT_LINK_TEXT],hideOverlay:"yes"===a[b.DATA_HIDE_OVERLAY],scrollOnRedirect:"yes"===a[b.DATA_SCROLL_ON_REDIRECT]}:{}},createSpan:function(a){return $("<span/>").text(a)},createLink:function(a,b,d){return $("<a/>").text(a).attr("href",b).attr("_sp",d)},createIcon:function(a){return $('<div class="fol-spacer"></div><span class="fol-privacy-icon'+
(a?"":" fol-privacy-icon-lock")+'"></span>')},createSecureHost:function(a){return!a||0>=a.length?a:a.startsWith("http:")?"https:"+a.substring(5):a},compileTextPattern:function(a){for(var k=a.pattern,d=a.entityType,c=a.entityType,l=a.entityType,g=a.entityType,a=a.isSecure,f=$(),h,i=0;i<k.length;i++){var e=k[i];"string"===typeof e?f=f.add(this.createSpan(e+" ")):e.attrib&&e.attrib.id&&"icon"===e.attrib.id?f=f.add(this.createIcon(g)):e.attrib&&e.attrib.linkId&&(h=j.BASE_URL,a&&(h=this.createSecureHost(j.BASE_URL)),
h+=e.attrib.linkId.replace("{type}",d).replace("{privacytype}",b.PRIVACY_TYPE_MAPPING[d]).replace("{username}",c),f=f.add(this.createLink(e.text,h,l)))}return f},hrefHasParams:function(a){return/\?/.test(a)},constructTrackingSid:function(a,b,d){var c="";a&&(c+="p"+a,b&&(c+=".m"+b),d&&(c+=".l"+d));return c},now:function(){return(new Date).getTime()}}});define("follow/overlay",["follow/constants","follow/content"],function(e,g){function f(a,b,c){this.widget=a;this.$widget=a.$el;this.enabled=b;this.widgetDataAttrs=c;this.init()}var j=function(){this.visible&&null!==this.overlayHideTimer&&(window.clearTimeout(this.overlayHideTimer),this.overlayHideTimer=null)},k=function(){this.visible&&!this.mouseInside&&this.hide(10)},l=function(){this.mouseInside=!0},m=function(){this.mouseInside=!1},n=function(a,b){a?this.$input.attr("checked","checked"):this.$input.removeAttr("checked");
this.$checkbox.toggleClass("fol-checkbox-checked",a);b&&$(this).trigger(a?e.EVENT_EMAIL_OPTIN:e.EVENT_EMAIL_OPTOUT)},o=function(a){a=$(a.target).is(":checked");this.updateCheckboxState(a,!0)},p=function(a){if(a.keyCode===e.KEY_SPACE||a.charCode===e.KEY_SPACE)a.preventDefault(),a=this.$input.attr("checked"),this.updateCheckboxState(a,!0)},q=function(){var a=f.visibleOverlay,b=this;this.overlayHideTimer=null;this.visible=!1;this.$el.fadeOut(200);b.$interest&&setTimeout(function(){b.$interest.hide()},
250);b.$interstActionButtons&&setTimeout(function(){b.$interstActionButtons.hide()},250);this===a&&(f.visibleOverlay=null)},r=function(){null!==this.overlayHideTimer&&(window.clearTimeout(this.overlayHideTimer),this.overlayHideTimer=null)};f.visibleOverlay=null;f.prototype={init:function(){var a=this.$widget,b,c,d=$.proxy;c=this.widgetDataAttrs;this.wasPostClick=!0;this.mouseInside=!1;this.overlayHideTimer=null;b=this.$el=$('<div class="fol-olay" ><span class="fol-olay-outer-notch"></span><span class="fol-olay-inner-notch"></span><span class="fol-error-icon"></span><p id="fol-overlay-msg"></p><ul></ul><div class="name-interest-actions"></div></div>').appendTo(a);
this.attachOverlayListeners();if(c&&c.entityType===e.ENTITY_INTEREST){$('<div class="name-interest"></div>').insertAfter(b.find(".fol-error-icon"));c=g.OVERLAY_LABEL_EMAIL[0];var a=a.prop("id")+"-checkbox",f=$('<li><input type="checkbox"></input><label><span class="fol-checkbox-icon" tabIndex="0"></span><span class="fol-text"></span></label></li>'),h=f.find("label");f.find("input").attr("id",a);h.attr("for",a).find(".fol-text").text(c);c=this.$checkbox=f.appendTo(b.find("ul"));a=this.$interest=b.find(".name-interest");
$('<div class="name-wrap"><input maxlength="100" /></div><div class="error">'+g.ERROR[0]+"</div>").appendTo(a);b=this.$interstActionButtons=b.find(".name-interest-actions");$('<div class="separator"></div><div class="buttons-wrap"><button class="name-interest-cancel" role="button">'+g.CANCEL[0]+'</button><button class="name-interest-save btn btn-m btn-prim" role="button">'+g.SAVE[0]+"</button></div>").appendTo(b);this.$input=c.find("input");this.updateCheckboxState=d(n,this);this.attachOverlayCheckboxListeners();
this.attachNameInterestListeners()}},attachOverlayListeners:function(){var a=this.$el,b=$.proxy;a.on("mouseover",b(r,this));a.on("mouseenter",b(l,this));a.on("mouseleave",b(m,this));a.delegate("a","focusin",b(j,this));a.delegate("a","focusout",b(k,this))},attachOverlayCheckboxListeners:function(){var a=this.$checkbox,b=$.proxy;a.find("input").on("click",b(o,this));a.find(".fol-checkbox-icon").on("keypress",b(p,this));a.on("focusin",b(j,this));a.on("focusout",b(k,this))},attachNameInterestListeners:function(){var a=
this.$interest,b=this.$interstActionButtons.find(".name-interest-save"),c=this.$interstActionButtons.find(".name-interest-cancel"),d=$.proxy;b.on("click",d(this.onNameInterestSaveClick,this));c.on("click",d(this.onNameInterestCancelClick,this));a.on("focusin",d(j,this))},updateInterestName:function(){var a=this.$interest.find("input"),b=a.val();b.length||(b=this.widget.getEntityName(),a.val(b));this.widget.nameInterest(b);this.trackNameInterestClick(e.NAME_INTEREST_ACTION.SAVE)},onNameInterestSaveClick:function(){var a=
this.$interest;0>=a.find("input").val().length||(a.find(".error").hide(),this.updateInterestName())},onNameInterestCancelClick:function(){this.hide(10)},toggleNameInterest:function(a){var b=this.$interest,c=this.$interstActionButtons;b&&(1===a?(b.show(),c.show()):(b.hide(),c.hide()))},trackNameInterestClick:function(a){$(document).trigger("rover",{sid:e.TRACKING_ID_NAME_INTEREST,act:a})},cancelHide:function(){null!==this.overlayHideTimer&&(window.clearTimeout(this.overlayHideTimer),this.overlayHideTimer=
null)},destroy:function(){var a=this.$el,b=this.$checkbox;a.off("mouseover mouseenter mouseleave");a.undelegate("a","focusin focusout");b.length&&(b.off("focusin"),b.find("input").off("click"),b.find(".fol-checkbox-icon").off("keypress"),b.off("focusin focusout"))},hide:function(a){if(null===this.overlayHideTimer||!a)this.overlayHideTimer=window.setTimeout($.proxy(q,this),a||0)},show:function(a,b,c,d,e,h){var g=this.$el,i=f.visibleOverlay;if(this.enabled)return this.setText(b),g.find("ul").toggle(d),
d&&this.updateCheckboxState(!1,!1),g.toggleClass("fol-error",e),this.wasPostClick=h,this.visible=!0,b=c.left,d=$(window).width(),400<d?(b+380+50>d&&(b=d-380-50),d=c.left+33-b):(b=30,d=c.left+30),c=c.top,h=this.$el,h.find(".fol-olay-inner-notch").css("left",d),h.find(".fol-olay-outer-notch").css("left",d),!e&&i!==this?(i&&i.hide(),f.visibleOverlay=this):e&&i===this&&(f.visibleOverlay=null),this.showTime=(new Date).getTime(),g.appendTo(a).css({left:b,top:c}).fadeIn("fast")},isVisible:function(){return this.$el.is(":visible")},
isCheckboxVisible:function(){return this.$checkbox.is(":visible")},hasTabIndex:function(){return 0<this.$el.find("a").length||this.isCheckboxVisible()},setText:function(a){Array.isArray(a)&&1===a.length&&(a=a[0]);this.$el.find("p").html(a)},isPostClick:function(){return this.wasPostClick},mouseIsInside:function(){return this.mouseInside},nameInterestAjaxHandler:function(a){var b=this.$interest;1===a?this.trackNameInterestClick(e.NAME_INTEREST_ACTION.SUCCESS):(this.trackNameInterestClick(e.NAME_INTEREST_ACTION.ERROR),
b.find(".error").show())}};return f});define("follow/widget","follow/constants follow/config/config follow/content follow/utils follow/overlay follow/counter follow/service/service".split(" "),function(d,v,f,h,w,l,i){var m=!1,n="ontouchstart"in document.documentElement,o=function(a){var b=$.Deferred();setTimeout(function(){b.resolve()},a);return b.promise()},j=function(){var a="",a=this.getIsHeartSaveVersion()?this.getHeartVersionDictString(this.getState(),this.getEntityType().toUpperCase(),this.getElementType()):this.getDictString(this.getState(),
this.getEntityType().toUpperCase(),this.getElementType());this.setText(a)},p=function(){var a=this.$btn,b=this.$el.hasClass("fol-flex")?"100%":a.outerWidth();a.addClass(d.classes.BUSY);"BUTTON"===a.prop("tagName")&&(a.css("display","inline-block"),a.css("width",b))},k=function(a,b,c,g){var e=this.getEntityIdOrAlternative();e&&(a={sid:a,folid:e,foltype:d.TRACKING_FOL_TYPE[this.getEntityType().toUpperCase()]},b&&(a.tn=b),c&&(a.act=c),g&&(a.err=g),$(document).trigger("rover",a))},q=function(a){var b=
this.currentAction===d.TRACKING_ACTION.FOLLOW?this.followFailureTrackingSid:this.unfollowFailureTrackingSid;this.setTryNumber();k.call(this,b,null,null,a);this.olay.toggleNameInterest(0);switch(a){case d.ERROR_CODE_AUTH:window.location=this.getLoginUrl();break;case d.ERROR_CODE_MAX_FOLLOWS:a="ERROR_MAX_";this.dataAttrs.isHeartSaveVersion&&(a="ERROR_MAX_SAVE_");a={pattern:f[a+this.getEntityType().toUpperCase()],entityName:this.getEntityName(),entityType:this.getEntityType(),userName:this.getUserId(),
feedTrackingSid:this.feedTrackingSid,profileTrackingSid:this.profileTrackingSid,isPublic:this.isPublic(),isSecure:this.dataAttrs.isSecure};a=h.compileTextPattern(a);this.olay.show(this.$el,a,this.getOverlayOffset(),!1,!0,!0);break;case d.ERROR_CODE_CSRF:this.olay.show(this.$el,this.getOverlayString("ERROR","DEFAULT"),this.getOverlayOffset(),!1,!0,!0);break;default:this.olay.show(this.$el,this.getOverlayString("ERROR","DEFAULT"),this.getOverlayOffset(),!1,!0,!0)}$(this).trigger("fol-error",{entityId:this.dataAttrs.entityId,
entityType:this.dataAttrs.entityType})},r=function(){var a=this.$btn,b=this.$el.hasClass("fol-flex")?"100%":"auto";a.removeClass(d.classes.BUSY);"BUTTON"===a.prop("tagName")&&(a.css("display","inline"),a.css("width",b));this.$btn.removeAttr("aria-busy");this.clickable=!0;j.call(this)},x=function(a){var b=this.getEntityType(),c=this.dataAttrs,g=this.getEntityName(),e=this.$btn,f=this.olay,j=this.getOverlayString(d.states.FOLLOWED,b,this.isPublic()),i="";e.addClass(d.classes.FOLLOWED);b===d.ENTITY_INTEREST?
(f.$el.find(".name-interest").show(),f.toggleNameInterest(1),f.$el.find(".name-interest input").val(g),a&&a.ssid&&(this.$el.attr("data-entityId",a.ssid),c.entityId=a.ssid)):(a={pattern:j,entityName:g,entityType:this.getEntityType(),userName:this.getUserId(),feedTrackingSid:this.feedTrackingSid,profileTrackingSid:this.profileTrackingSid,isPublic:this.isPublic(),isSecure:this.dataAttrs.isSecure},i=h.compileTextPattern(a));e.attr("aria-pressed",!0);f.show(this.$el,i,this.getOverlayOffset(),b===d.ENTITY_INTEREST,
!1,!0);(!this.isMouseOverBtn||n)&&f.hide(d.OVERLAY_CLICKED_HIDE_DELAY);$(this).trigger("follow",{entityId:c.entityId,entityType:c.entityType,userId:c.userId});this.setTryNumber(1);k.call(this,this.followTrackingSid)},y=function(a){var b=this.getEntityType(),c=this.$btn,g=d.classes,e=this.dataAttrs;c.removeClass(g.UNFOLLOW);c.removeClass(g.FOLLOWED);c.attr("aria-pressed",!1);b===d.ENTITY_INTEREST&&(a&&a.ssid)&&(this.$el.removeAttr("data-entityId"),e.entityId=null);this.olay.hide();$(this).trigger("unfollow",
{entityId:e.entityId,entityType:e.entityType});this.setTryNumber(1);k.call(this,this.unfollowTrackingSid)},s=function(){var a=this.dataAttrs,b=this.ajaxRequest,c=$.proxy,a={userId:a.userId,entityId:a.entityId,entityName:a.entityName,entityType:a.entityType,csrf:a.csrf,csrf_folloAjax:a.csrf_folloAjax_follow,searchUrl:a.searchUrl,interestId:this.getInterestId(),visibility:this.getVisibility(),useFolloAjaxCommands:a.useFolloAjaxCommands,isSecure:a.isSecure};p.call(this);this.currentAction=d.TRACKING_ACTION.FOLLOW;
k.call(this,this.followClickTrackingSid,this.getTryNumber(),this.currentAction);this.olay.hide();b=i.follow(a);$.when(b,o(d.MIN_FOLLOW_DELAY)).done(c(x,this)).fail(c(q,this)).always(c(r,this))},z=function(){var a={pattern:this.getOverlayString(this.getState(),this.getEntityType()),entityName:this.getEntityName(),entityType:this.getEntityType(),userName:this.getUserId(),feedTrackingSid:this.feedTrackingSid,profileTrackingSid:this.profileTrackingSid,isPublic:this.isPublic(),isSecure:this.dataAttrs.isSecure},
a=h.compileTextPattern(a);this.overlayShowTimer=null;!this.olay.isVisible()&&l.getCount(this.dataAttrs.userId,this.dataAttrs.entityType)<d.HIDE_HOVER_AFTER_N_FOLLOWS&&this.olay.show(this.$el,a,this.getOverlayOffset(),!1,!1,!1)},A=function(){this.isMouseOverBtn=!0;this.olay.cancelHide();this.isOn()&&(this.$btn.addClass(d.classes.UNFOLLOW),j.call(this));null===this.overlayShowTimer&&(this.overlayShowTimer=window.setTimeout($.proxy(z,this),d.OVERLAY_SHOW_DELAY))},B=function(){this.isMouseOverBtn=!1;
var a;this.olay.isPostClick()?(a=h.now()-this.olay.showTime,a=d.OVERLAY_HIDE_DELAY+Math.max(d.OVERLAY_CLICKED_HIDE_DELAY-a,0)):a=d.OVERLAY_HIDE_DELAY;this.$btn.removeClass(d.classes.UNFOLLOW);window.clearTimeout(this.overlayShowTimer);this.overlayShowTimer=null;this.olay.isNameInterestEditMode||this.olay.hide(a);j.call(this)},C=function(){if(!m&&(this.olay.cancelHide(),this.isOn()&&(this.$btn.addClass(d.classes.UNFOLLOW),j.call(this)),l.getCount(this.dataAttrs.userId,this.dataAttrs.entityType)<d.HIDE_HOVER_AFTER_N_FOLLOWS)){var a=
{pattern:this.getOverlayString(this.getState(),this.getEntityType()),entityName:this.getEntityName(),entityType:this.getEntityType(),userName:this.getUserId(),feedTrackingSid:this.feedTrackingSid,profileTrackingSid:this.profileTrackingSid,isPublic:this.isPublic(),isSecure:this.dataAttrs.isSecure},a=h.compileTextPattern(a);this.olay.show(this.$el,a,this.getOverlayOffset(),!1,!1,!1)}},D=function(){this.olay.mouseIsInside()||(this.$btn.removeClass(d.classes.UNFOLLOW),this.olay.hide(d.OVERLAY_BLUR_DELAY),
j.call(this))},t=function(a){if(this.clickable)if(a.preventDefault(),window.clearTimeout(this.overlayShowTimer),this.overlayShowTimer=null,this.clickable=!1,this.$btn.attr("aria-busy",!0),this.isLoggedIn())if(this.isOn()){var b=this.dataAttrs,c=this.ajaxRequest,a=$.proxy,b={userId:b.userId,entityId:b.entityId,entityName:b.entityName,entityType:b.entityType,csrf:b.csrf,csrf_folloAjax:b.csrf_folloAjax_unfollow,searchUrl:b.searchUrl,interestId:this.getInterestId(),useFolloAjaxCommands:b.useFolloAjaxCommands,
isSecure:b.isSecure};p.call(this);this.currentAction=d.TRACKING_ACTION.UNFOLLOW;k.call(this,this.followClickTrackingSid,this.getTryNumber(),this.currentAction);this.olay.hide();c=i.unfollow(b);$.when(c,o(d.MIN_FOLLOW_DELAY)).done(a(y,this)).fail(a(q,this)).always(a(r,this))}else s.call(this);else window.location=this.getLoginUrl()},E=function(){m=!0},F=function(){m=!1},G=function(a){a.keyCode===d.KEY_SPACE&&t.call(this,a)},H=function(){var a={entityId:this.getEntityId(),csrf:this.getCsrf(),csrf_folloAjax:this.getCsrfFolloAjaxUpdate(),
searchUrl:this.getSearchUrl(),entityName:this.getEntityName(),entityType:this.getEntityType(),useFolloAjaxCommands:this.getUseFolloAjaxCommands(),emailFlag:1,isSecure:this.getisSecure()};i.emailOptInOut(a);k.call(this,this.emailOptInTrackingSid)},I=function(){var a={entityId:this.getEntityId(),csrf:this.getCsrf(),csrf_folloAjax:this.getCsrfFolloAjaxUpdate(),searchUrl:this.getSearchUrl(),entityName:this.getEntityName(),entityType:this.getEntityType(),useFolloAjaxCommands:this.getUseFolloAjaxCommands(),
emailFlag:0,isSecure:this.getisSecure()};i.emailOptInOut(a);k.call(this,this.emailOptOutTrackingSid)},J=function(a,b,c){var g=this.dataAttrs.pseudoWidgetId;return d.REDIRECT_URL_TEMPLATE.replace("{HREF}",a).replace("{URL_SYMBOL}",h.hrefHasParams(a)?"&":"?").replace("{CSRF_PARAM_KEY}",d.SEARCH_PARAM_CSRF).replace("{CSRF_PARAM_VALUE}",c).replace("{PSEUDO_WIDGET_ID}",g?"&pwid="+g:"")+(this.dataAttrs.scrollOnRedirect?"#"+b:"")},K=function(a,b){$(document).trigger("follow.fol",b);l.increment(b.userId,
b.entityType)},L=function(a,b){$(document).trigger("unfollow.fol",b)},M=function(a,b){$(document).trigger("fol-error.fol",b)},e=null,u=function(a){var b=a&&a[d.DATA_FOLLOW_DATA];if(b)try{a=window.JSON?JSON.parse(b):eval("("+b+")")}catch(c){console.debug(c)}this.dataAttrs=h.normalizeAttributes(a);this.init()};u.prototype={init:function(){this.$btn=(this.$el=$(this.getEl())).find("button, a");this.clickable=!0;this.ajaxRequest=this.overlayShowTimer=null;this._createOverlay();this._setTrackingIds();
this._attachEventListeners();this._setScreenReaderAlly();this._setKeyboardAlly();this._attachActionStatusListener();this._handleRedirectFollow();this._attachHideOverlayListener();this.isTouch=n},_createOverlay:function(){var a=new w(this,!this.getHideOverlay(),this.dataAttrs);this.olay=a;this.$olay=$(a);this.$btn.hasClass("set-width")&&a.$el.addClass("set-width")},_setTrackingIds:function(){var a=this.getPageId(),b=this.getModuleId(),c=h.constructTrackingSid;this.followTrackingSid=c(a,b,d.TRACKING_ID_FOLLOW);
this.unfollowTrackingSid=c(a,b,d.TRACKING_ID_UNFOLLOW);this.emailOptInTrackingSid=c(a,b,d.TRACKING_ID_EMAILOPTIN);this.emailOptOutTrackingSid=c(a,b,d.TRACKING_ID_EMAILOPTOUT);this.feedTrackingSid=c(a,b,d.TRACKING_ID_FEED);this.profileTrackingSid=c(a,b,d.TRACKING_ID_PROFILE);this.followClickTrackingSid=c(a,b,d.TRACKING_ID_FOLLOW_CLICK);this.followFailureTrackingSid=c(a,b,d.TRACKING_ID_FOLLOW_FAILURE);this.unfollowFailureTrackingSid=c(a,b,d.TRACKING_ID_UNFOLLOW_FAILURE)},_attachEventListeners:function(){var a=
this.$btn,b=this.$olay,c=$.proxy;this.$el.on("mouseleave",c(B,this));a.on("mouseenter",c(A,this));a.on("focusin",c(C,this));a.on("focusout",c(D,this));a.on("click",c(t,this));a.on("mousedown",c(E,this));a.on("mouseup",c(F,this));b.on(d.EVENT_EMAIL_OPTIN,c(H,this));b.on(d.EVENT_EMAIL_OPTOUT,c(I,this))},_setKeyboardAlly:function(){var a=this.$btn;this.isLink()&&(a.attr("href","#"),a.on("keypress",$.proxy(G,this)))},_setScreenReaderAlly:function(){var a=this.$btn;a.attr("role","button");a.attr("aria-pressed",
this.isOn())},_attachActionStatusListener:function(){var a=$(this);a.on("follow",K);a.on("unfollow",L);a.on("fol-error",M)},_handleRedirectFollow:function(){if(!e){e=h.getSearchParams();var a=e[d.SEARCH_PARAM_CSRF],b=e.pwid||window.location.hash.substring(1);e={csrf:a,pseudoWidgetId:b}}a=e&&e.csrf;b=e&&e.pseudoWidgetId;a&&this.setCsrf(a);return b===this.dataAttrs.pseudoWidgetId?(this.follow(),!0):!1},_attachHideOverlayListener:function(){var a=this,b=this.getElId(),c;$("body").on("click touchstart",
function(d){c=$(d.target).closest(".fol-widget").attr("id");c!==b&&a.clickedAway()})},destroy:function(){this.$btn.off("mouseover focusin focusout click keypress");this.$el.off("mouseleave");$(this.olay).off(d.EVENT_EMAIL_OPTIN).off(d.EVENT_EMAIL_OPTOUT)},_resetSearchParams:function(){e=null},setText:function(a){this.$btn.find("span:last").text(a)},isOn:function(){return this.$btn.hasClass(d.classes.FOLLOWED)},isLink:function(){return"LINK"===this.getElementType()},isLoggedIn:function(){return""!==
this.dataAttrs.userId},getState:function(){var a=d.states;return this.$btn.hasClass(d.classes.UNFOLLOW)?a.UNFOLLOW:this.isOn()?a.FOLLOWED:a.FOLLOW},isPublic:function(){return"public"===this.getVisibility()},getUserId:function(){return this.dataAttrs.userId||""},getElementType:function(){return"a"===this.$btn.prop("tagName").toLowerCase()?"LINK":this.$btn.prop("tagName").toUpperCase()},getEntityType:function(){return this.dataAttrs.entityType},getEntityName:function(){return this.dataAttrs.entityName},
getEntityId:function(){return this.dataAttrs.entityId},getInterestId:function(){return this.dataAttrs.interestId},getModuleId:function(){return this.dataAttrs.moduleId},getPageId:function(){return this.dataAttrs.pageId},getCsrfFolloAjaxUpdate:function(){return this.dataAttrs.csrf_folloAjax_update},getisSecure:function(){return this.dataAttrs.isSecure},getUseFolloAjaxCommands:function(){return this.dataAttrs.useFolloAjaxCommands},getIsHeartSaveVersion:function(){return this.dataAttrs.isHeartSaveVersion},
getCsrf:function(){return this.dataAttrs.csrf},getSearchUrl:function(){return this.dataAttrs.searchUrl},getVisibility:function(){return this.dataAttrs.visibility},getIsShortLinkText:function(){return this.dataAttrs.shortLinkText},getEntityIdOrAlternative:function(){return this.getSearchUrl()||this.getEntityId()||this.getInterestId()},getHideOverlay:function(){return this.dataAttrs.hideOverlay},getTryNumber:function(){return this.dataAttrs.tryNumber||1},getHeartVersionDictString:function(a,b,c){if("FOLLOWED"===
a||"UNFOLLOW"===a){if(this.dataAttrs.followingDisplayKey&&0<this.dataAttrs.followingDisplayKey.length)return f[this.dataAttrs.followingDisplayKey][0];a="SAVED"}else{if(this.dataAttrs.followDisplayKey&&0<this.dataAttrs.followDisplayKey.length)return f[this.dataAttrs.followDisplayKey][0];a="SAVE"}b=[c,a,b].join("_");return f[b][0]},getDictString:function(a,b,c){if("FOLLOWED"===a||"UNFOLLOW"===a)a="FOLLOWING";a="BUTTON"===c||this.getIsShortLinkText()?["BUTTON",a].join("_"):[c,a,b].join("_");return f[a][0]},
getOverlayString:function(a,b,c){var b=b.toUpperCase(),d=a.toUpperCase();"ERROR"===a?a="ERROR":"FOLLOWED"===d?a=["OVERLAY",d,b,c?"PUBLIC":"PRIVATE"].join("_"):(a=this.dataAttrs.isHeartSaveVersion?"FOLLOW"===d?"SAVE":"SAVED":d,a=["OVERLAY",a,b].join("_"));return f[a]},getLoginUrl:function(){var a=this.$el.prop("id"),b=this.dataAttrs.csrf,c=window.location.hash?window.location.href.substring(0,window.location.href.indexOf("#")):window.location.href,a=$.proxy(J,this)(c,a,b),a=encodeURIComponent(a);return d.LOGIN_URL_TEMPLATE.replace("{LOGIN_HOST}",
v.LOGIN_HOST).replace("{REDIRECT_URL}",a)},getOverlayOffset:function(){var a=this.$btn,b=a.position(),c=b.left,a=b.top+a.height()+d.OVERLAY_SPACING;"LINK"===this.getElementType()&&(c-=13,a-=13);return{left:c,top:a}},setTryNumber:function(a){a?a=1:(a=this.getTryNumber(),a++);this.set("tryNumber",a)},setButtonState:function(a){var b=this.$btn,c=d.classes.FOLLOWED;"following"===a?(b.addClass(c),b.attr("aria-pressed",!0)):"follow"===a&&(b.removeClass(c),b.attr("aria-pressed",!1));j.call(this)},set:function(a,
b){a&&(this.dataAttrs[a]=b)},setCsrf:function(a){/^[a-fA-F0-9]*$/.test(a)&&(this.dataAttrs.csrf=a)},follow:function(){!1===this.isOn()&&s.call(this)},nameInterest:function(a){var b=this.dataAttrs,c=this,e=this.ajaxRequest,e=i.nameInterest({entityId:b.entityId,csrf:b.csrf,csrf_folloAjax:b.csrf_folloAjax_update,searchUrl:b.searchUrl,entityName:a,entityType:b.entityType,useFolloAjaxCommands:b.useFolloAjaxCommands,isSecure:b.isSecure});$.when(e).done(function(){c.olay.nameInterestAjaxHandler(1);(!c.isMouseOverBtn||
n)&&c.olay.hide(d.OVERLAY_CLICKED_HIDE_DELAY)}).fail(function(){c.olay.nameInterestAjaxHandler(0)})},clickedAway:function(){this.olay.hide()}};return u});(function(a){var f=function(){var b=a("#user_bio");a.extend(this,{userBio:null,charRem:250,charLimit:250,profileAjax:null,enableEdit:function(d){userBio=this;userBio.profileAjax=d;b.addClass("edit");userBio.checkIfBioIsEmpty();a(".usrbio.edit .show_value").on("click",function(){userBio.startEdit();a("textarea:visible:first").focus()});a(".usrbio.edit .save").on("click",function(){userBio.saveBio("save")});a(".usrbio.edit .cancel").on("click",function(){userBio.cancel()});a(".usrbio.edit .input_bio").on("keyup keydown",
function(){userBio.getRemainingChars()});a(".usrbio.edit .show_value").hover(function(){b.find(".icons").removeClass("pen").addClass("pen_actv")},function(){b.find(".edit_icn").removeClass("pen_actv").addClass("pen")});a(".usrbio .rmv_cancel").on("click",function(){b.find(".dialog").dialog("hide")});a(".usrbio.edit .char_rem").html(a(".char_rem").attr("contentString"))},checkIfBioIsEmpty:function(){b.hasClass("edit")&&(0==a.trim(b.find(".bio").html()).length?b.find(".ph").show():b.find(".ph").hide())},
startEdit:function(){b.hasClass("edit")&&(b.find(".show_value").hide(),b.find(".inline_edit").show(),userBio.getRemainingChars(),b.find(".input_bio").val(a.trim(b.find(".bio").text())))},saveBio:function(a){if(b.hasClass("edit")){var c=userBio.profileAjax,e=encodeURIComponent(b.find(".input_bio").val());c.updateInfo(5,e,function(c){null==c.error?(b.find(".bio").text(decodeURIComponent(e)),userBio.closeEdit()):"save"==a&&("NOT_AUTHORIZED"==c.error.errors?userBio.showErrorMessage("signInErrorText"):
userBio.showErrorMessage("serviceFailureText"))},function(){userBio.showErrorMessage("serviceFailureText")})}},cancel:function(){b.hasClass("edit")&&userBio.closeEdit()},showRemainingChars:function(){if(b.hasClass("edit")){var d=a(".char_rem"),c=a(".single_char_rem");c.hide();0>userBio.charRem&&(userBio.charRem=0);1===userBio.charRem?(c.html(c.attr("contentString")).show(),d.hide()):(d.find("span").html(userBio.charRem),d.show())}},closeEdit:function(){b.find(".inline_edit").hide();b.find(".show_value").show();
userBio.checkIfBioIsEmpty()},getRemainingChars:function(){if(b.hasClass("edit")){var a=b.find(".input_bio"),c=a.val().length;c>userBio.charLimit&&(c=userBio.charLimit,a.val(a.val().substring(0,userBio.charLimit)),a.scrollTop=a.scrollHeight);userBio.charRem=userBio.charLimit-c;userBio.showRemainingChars()}},doneEditing:function(){"block"==b.find(".inline_edit").css("display")&&userBio.saveBio("close");userBio.closeEdit();a(".ph").hide();b.removeClass("edit")},showErrorMessage:function(a){var c=b.find(".error_message.dialog");
c.find(".err").hide();c.dialog();c.find("#"+a).show()},escapeSpecialChars:function(a){return a=a.replace(RegExp("&","g"),"&amp;").replace(RegExp("<","g"),"&lt;").replace(RegExp(">","g"),"&gt;").replace(RegExp('"',"g"),"&quot;").replace(RegExp("'","g"),"&#039;")}})};a.cmp=a.cmp||{};a.cmp.profileBio=function(){return new f}})(jQuery);(function(e){e.fn.dot_navigation=function(d){function j(){c=0==c?f-2:1==c?f-1:c-2;g()}function g(){c++;if(c>=f||0>c)c=0;a.find(".itm_ctr").children("ul").animate({left:-(c*parseInt(h))},600);a.find(".dots").children("a").children("span[data-type='curr_dots']").removeClass("selected").addClass("unselected");a.find(".dots").children("a").children("span[data-type='curr_dots']").eq(c).removeClass("unselected").addClass("selected")}var b=d||{},a=e(this),d=b&&b.eachWidth?b.eachWidth:"350",i=b&&b.eachHeight?
b.eachHeight:"200",h=d+"px",k=i+"px",i=parseInt(i,10)-18+"px",c=b&&b.startAt?b.startAt:-1,f=a.find("ul:first").children("li").length,b=b.showNextPrev?b.showNextPrev:"false";a.css("width",h);a.css("height",k);a.find(".itm_ctr").css("width",h);a.find(".itm_ctr").css("height",i);a.find("ul li").css("width",h);a.find("ul li").css("height",i);a.find("ul").css("width",f*d);a.find(".dots_ctr").css("width",h);"true"==b&&a.find(".dots").append('<a href="javascript:;"><span class="dots_icns icons previous" data-type="previous" pos="previous" alt="previous"></span></a>');
for(d=0;d<=f-1;d++)a.find(".dots").append('<a href="javascript:;"><span class="dots_icns icons unselected" data-type="curr_dots" pos="'+d+'" alt="Page '+d+' of Feedback"></span></a>');"true"==b&&a.find(".dots").append('<a href="javascript:;"><span class="dots_icns icons next" data-type="next" pos="next" alt="next"></span></a>');a.find(".dots").children("a").children("span").on("click",function(){switch(e(this).attr("data-type")){case "previous":j();break;case "curr_dots":c=0==parseInt(e(this).attr("pos"))?
f-1:parseInt(e(this).attr("pos"))-1;g();break;case "next":g()}});a.find(".dots").children("a").on("click",function(){switch(e(this).children("span").attr("data-type")){case "previous":j();break;case "curr_dots":c=0==parseInt(e(this).children("span").attr("pos"))?f-1:parseInt(e(this).children("span").attr("pos"))-1;g();break;case "next":g()}});g()}})(jQuery);raptor.defineClass("component/index_card/feedback_comments",function(){return{init:function(){$(function(){$("#feedback_comments").dot_navigation({eachWidth:"300",eachHeight:"90",showNextPrev:"false"})})}}});raptor.defineClass("component/index_card/member_info",function(){return{init:function(){for(var c=$("#member_info").find(".countElem"),a=0;a<c.length;a++){var b=$(c[a]),d=b.attr("contentString");b.html(d);b.show()}}}});raptor.defineClass("modules/following",function(){return{init:function(){new (raptor.require("ebayUI.Bubble"))({selector:"[data-bubble]",trigger:"mouseover",placement:"bottom",width:150});$(".bub").on("click",function(a){a.stopPropagation()});$("body").on("click",function(){"block"==$(".bub").css("display")&&$(".bub").hide()});$("#following img").on("load",function(){if(navigator.userAgent.indexOf("IE 8">-1)){$(this).parent().css("display","block");var a=$(this).height();38>a&&$(this).css("top",(38-
a)/2+1+"px")}})}}});raptor.defineClass("components/reviews/reviews_models",function(){return{init:function(b){var a=this;a.model=b;a.pubsub=raptor.require("pubsub");window.ebay&&window.ebay.auth&&(window.ebay.auth.init(window.ebayAuthTokens),window.ebay.client.initialize(b.reviewsCOSServiceURL));$(".show-full-review-link").on("click",function(){a.reviewId=$(this).closest(".ebay-review-section").attr("id").split("_")[1];a.showFullReviewModel()});$(".ebay-review-section").on("click",".overlay-close",function(b){a.hideFullReview(b,
$(".full-review-model:visible .overlay-close"))});$(".delete-review-model").on("click",".hide-delete-review",function(b){a.handleHideDeleteModel(b,$(".delete-review-model .hide-delete-review"))});$(".ebay-review-section").on("click",".delete-review",function(){a.reviewId=$(this).attr("id").split("_")[1];$(".delete-review-model").show()});if(a.model.isReviewsMediaImagesEnabled)$(".ebay-review-card > .reviews-images .review-pic").on("click",function(){a.pubsub&&(a.reviewId=$(this).closest(".ebay-review-section").attr("id").split("_")[1],
a.pubsub.publish("_REVIEWS_IMAGES_LAYER_OPEN",$(this)))});$(".delete-review-model").on("click",".submit-delete-review",function(){a.isUserLoggedIn(b)?a.callService(b):window.location=a.getSigninUrl(b)});$(document).keyup(function(b){27===b.keyCode&&(0<$(".full-review-model:visible").length?a.hideFullReview(b,$(".full-review-model:visible .overlay-close")):a.handleHideDeleteModel(b,$(".delete-review-model .hide-delete-review")))})},showFullReviewModel:function(){$.rover.track("p2545226.m3915.l6963");
$("#review_model_"+this.reviewId).show()},hideFullReview:function(b,a){$(a).closest(".full-review-model").hide()},handleHideDeleteModel:function(b,a){$(a).closest(".delete-review-model").hide()},isUserLoggedIn:function(b){var a=raptor.require("ebay.cookies"),c=raptor.require("Base64"),d=!1;null!==a&&(void 0!==a&&null!=b)&&(a=a.readCookie("dp1","u1p"),c=c.decode(decodeURIComponent(a)),a=b.username,d=b.isUserSignedIn&&""!=c&&c===a);return d},getSigninUrl:function(b){return"https://signin."+b.domain+
"/ws/eBayISAPI.dll?SignIn&ru="+encodeURIComponent(document.URL)},callService:function(b){var a=this;ebay.client.ajax.execute("DELETE",b.reviewsCOSServiceURL+"/buy/review/v1/review/"+a.reviewId,{timeout:5E3,clientid:"urwwidget",dataType:"text/html",headers:{"x-ebay-c-marketplace-id":b.marketplaceid}},function(b){200===b&&(a.handleHideDeleteModel(null,$(".delete-review-model:visible .hide-delete-review")),$("#review_"+a.reviewId).fadeOut(1E3))},function(){a.handleHideDeleteModel(null,$(".delete-review-model:visible .hide-delete-review"))});
$.rover.track("p2545226.m3915.l6965")}}});(function(a){var a={tooltip_title_1:a("#tooltip_title_1").html(),tooltip_content_1:a("#tooltip_content_1").html(),button_finish:a("#button_finish").html()},b=require("ete/tours/Manager");b.load({id:"2600",rules:{maxshow:"5"},steps:[{tooltip:{type:"bubble",placement:"right",selector:".fol-widget"}}]},a);b.start({pageId:2545226})})(jQuery);